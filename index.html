<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Vision Board 2026</title>
  <link rel="stylesheet" href="style.css">
</head>

<body class="vision">

  <button class="crown-btn" onclick="location.href='achievements.html'">ğŸ‘‘</button>

  <h1>Vision Board 2026</h1>
  <p class="subtitle">Este serÃ¡ mi aÃ±o, quiera o no</p>

  <!-- ===== SECCIONES ===== -->

  <section class="category">
    <h2>ğŸ“š Academic</h2>
    <button onclick="selectCategory('academic')">+ Agregar foto</button>
    <div class="grid" id="academic"></div>
  </section>

  <section class="category">
    <h2>âœ¨ Moments</h2>
    <button onclick="selectCategory('moments')">+ Agregar foto</button>
    <div class="grid" id="moments"></div>
  </section>

  <section class="category">
    <h2>ğŸ¯ Wanna Get</h2>
    <button onclick="selectCategory('wannaget')">+ Agregar foto</button>
    <div class="grid" id="wannaget"></div>
  </section>

  <section class="category">
    <h2>ğŸŒ± Habits</h2>
    <button onclick="selectCategory('habits')">+ Agregar foto</button>
    <div class="grid" id="habits"></div>
  </section>

  <!-- input oculto -->
  <input type="file" id="fileInput" accept="image/*" hidden>

  <!-- ===== FIREBASE + LÃ“GICA ===== -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
    import { 
      getStorage, 
      ref, 
      uploadBytes, 
      getDownloadURL, 
      listAll 
    } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-storage.js";

    // ğŸ”¥ TU CONFIG REAL
    const firebaseConfig = {
      apiKey: "AIzaSyBzcxSPLO6oqeY2_nbzemFhEjNEDLBbsJs",
      authDomain: "vision-board-2026-2d04e.firebaseapp.com",
      projectId: "vision-board-2026-2d04e",
      storageBucket: "vision-board-2026-2d04e.firebasestorage.app",
      messagingSenderId: "737892135160",
      appId: "1:737892135160:web:80d08fff34f3f9be850b0d"
    };

    const app = initializeApp(firebaseConfig);
    const storage = getStorage(app);

    let currentCategory = "";

    // Seleccionar secciÃ³n
    window.selectCategory = function (category) {
      currentCategory = category;
      document.getElementById("fileInput").click();
    };

    // Subir imagen
    document.getElementById("fileInput").addEventListener("change", async (e) => {
      const file = e.target.files[0];
      if (!file || !currentCategory) return;

      const storageRef = ref(
        storage,
        `${currentCategory}/${Date.now()}-${file.name}`
      );

      await uploadBytes(storageRef, file);
      const url = await getDownloadURL(storageRef);

      addImageToGrid(currentCategory, url);

      e.target.value = "";
    });

    // Mostrar imagen
    function addImageToGrid(category, url) {
      const img = document.createElement("img");
      img.src = url;
      img.className = "photo";
      document.getElementById(category).appendChild(img);
    }

    // ğŸ” Cargar imÃ¡genes al abrir la pÃ¡gina
    async function loadImages(category) {
      const listRef = ref(storage, category);
      const result = await listAll(listRef);

      for (const item of result.items) {
        const url = await getDownloadURL(item);
        addImageToGrid(category, url);
      }
    }

    // Cargar todas las secciones
    ["academic", "moments", "wannaget", "habits"].forEach(loadImages);
  </script>

</body>
</html>
